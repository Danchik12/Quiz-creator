{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/ASUS/Desktop/Quiz-creator/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\ASUS\\\\Desktop\\\\Quiz-creator\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import axios from'axios';import{AUTH_SUCCESS,AUTH_LOGOUT}from'./actionTypes';export function auth(email,password,isLogin){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var authData,url,response,data,expirationDate;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:authData={email:email,password:password,returnSecureToken:true};url='https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=AIzaSyD8U07p1wdLi2yhRMVF2fgLNMGTYYAZEnU';if(isLogin){url='https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyD8U07p1wdLi2yhRMVF2fgLNMGTYYAZEnU';}_context.next=5;return axios.post(url,authData);case 5:response=_context.sent;data=response.data;expirationDate=new Date(new Date().getTime()+data.expiresIn*1000);localStorage.setItem('token',data.idToken);localStorage.setItem('userId',data.localId);localStorage.setItem('expirationDate',expirationDate);dispatch(authSuccess(data.idToken));dispatch(autoLogout(data.expiresIn));case 13:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();}export function autoLogout(time){return function(dispatch){setTimeout(function(){dispatch(logout());},time*1000);};}export function logout(){localStorage.removeItem('token');localStorage.removeItem('userId');localStorage.removeItem('expirationDate');return{type:AUTH_LOGOUT};}export function authSuccess(token){return{type:AUTH_SUCCESS,token:token};}export function autoLogin(){return function(dispatch){var token=localStorage.getItem('token');if(!token){dispatch(logout());}else{var expirationDate=new Date(localStorage.getItem('expirationDate'));if(expirationDate<=new Date()){dispatch(logout());}else{dispatch(authSuccess(token));dispatch(autoLogout((expirationDate.getTime()-new Date().getTime())/1000));}}};}","map":{"version":3,"sources":["C:/Users/ASUS/Desktop/Quiz-creator/src/store/action/auth.js"],"names":["axios","AUTH_SUCCESS","AUTH_LOGOUT","auth","email","password","isLogin","dispatch","authData","returnSecureToken","url","post","response","data","expirationDate","Date","getTime","expiresIn","localStorage","setItem","idToken","localId","authSuccess","autoLogout","time","setTimeout","logout","removeItem","type","token","autoLogin","getItem"],"mappings":"4PAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAAQC,YAAR,CAAqBC,WAArB,KAAuC,eAAvC,CAEA,MAAO,SAASC,CAAAA,IAAT,CAAeC,KAAf,CAAqBC,QAArB,CAA8BC,OAA9B,CAAsC,CAC5C,+FAAO,iBAAMC,QAAN,gKACAC,QADA,CACS,CACdJ,KAAK,CAALA,KADc,CAEdC,QAAQ,CAARA,QAFc,CAGdI,iBAAiB,CAAC,IAHJ,CADT,CAOJC,GAPI,CAOE,uGAPF,CAQR,GAAIJ,OAAJ,CAAY,CACXI,GAAG,CAAC,mHAAJ,CACA,CAVO,sBAWcV,CAAAA,KAAK,CAACW,IAAN,CAAWD,GAAX,CAAeF,QAAf,CAXd,QAWFI,QAXE,eAYFC,IAZE,CAYID,QAAQ,CAACC,IAZb,CAaFC,cAbE,CAae,GAAIC,CAAAA,IAAJ,CAAS,GAAIA,CAAAA,IAAJ,GAAWC,OAAX,GAAuBH,IAAI,CAACI,SAAL,CAAiB,IAAjD,CAbf,CAeRC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA6BN,IAAI,CAACO,OAAlC,EACAF,YAAY,CAACC,OAAb,CAAqB,QAArB,CAA8BN,IAAI,CAACQ,OAAnC,EACAH,YAAY,CAACC,OAAb,CAAqB,gBAArB,CAAsCL,cAAtC,EAEAP,QAAQ,CAAEe,WAAW,CAACT,IAAI,CAACO,OAAN,CAAb,CAAR,CACAb,QAAQ,CAAEgB,UAAU,CAACV,IAAI,CAACI,SAAN,CAAZ,CAAR,CApBQ,uDAAP,+DAsBA,CAED,MAAO,SAASM,CAAAA,UAAT,CAAoBC,IAApB,CAAyB,CAC/B,MAAO,UAAAjB,QAAQ,CAAI,CAClBkB,UAAU,CAAC,UAAM,CAChBlB,QAAQ,CAACmB,MAAM,EAAP,CAAR,CACA,CAFS,CAERF,IAAI,CAAG,IAFC,CAAV,CAGA,CAJD,CAKA,CAED,MAAO,SAASE,CAAAA,MAAT,EAAkB,CACzBR,YAAY,CAACS,UAAb,CAAwB,OAAxB,EACAT,YAAY,CAACS,UAAb,CAAwB,QAAxB,EACAT,YAAY,CAACS,UAAb,CAAwB,gBAAxB,EACC,MAAO,CACNC,IAAI,CAAC1B,WADC,CAAP,CAGA,CAGD,MAAO,SAASoB,CAAAA,WAAT,CAAqBO,KAArB,CAA2B,CAClC,MAAO,CACND,IAAI,CAAC3B,YADC,CAEN4B,KAAK,CAALA,KAFM,CAAP,CAIC,CAED,MAAO,SAASC,CAAAA,SAAT,EAAqB,CAC3B,MAAO,UAAAvB,QAAQ,CAAI,CAClB,GAAMsB,CAAAA,KAAK,CAAGX,YAAY,CAACa,OAAb,CAAqB,OAArB,CAAd,CACA,GAAI,CAACF,KAAL,CAAY,CACXtB,QAAQ,CAACmB,MAAM,EAAP,CAAR,CACA,CAFD,IAEM,CACL,GAAMZ,CAAAA,cAAc,CAAG,GAAIC,CAAAA,IAAJ,CAASG,YAAY,CAACa,OAAb,CAAqB,gBAArB,CAAT,CAAvB,CACA,GAAIjB,cAAc,EAAI,GAAIC,CAAAA,IAAJ,EAAtB,CAAiC,CAChCR,QAAQ,CAACmB,MAAM,EAAP,CAAR,CACA,CAFD,IAEM,CACLnB,QAAQ,CAAEe,WAAW,CAACO,KAAD,CAAb,CAAR,CACDtB,QAAQ,CAAEgB,UAAU,CAAC,CAACT,cAAc,CAACE,OAAf,GAA2B,GAAID,CAAAA,IAAJ,GAAWC,OAAX,EAA5B,EAAkD,IAAnD,CAAZ,CAAR,CACC,CACD,CACD,CAbD,CAeA","sourcesContent":["import axios from 'axios'\r\nimport {AUTH_SUCCESS,AUTH_LOGOUT} from './actionTypes'\r\n\r\nexport function auth (email,password,isLogin){\r\n return async dispatch =>{\r\n \tconst authData={\r\n \t\temail,\r\n \t\tpassword,\r\n \t\treturnSecureToken:true\r\n \t}\r\n \t\r\nlet url = 'https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=AIzaSyD8U07p1wdLi2yhRMVF2fgLNMGTYYAZEnU'\r\nif (isLogin){\r\n\turl='https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyD8U07p1wdLi2yhRMVF2fgLNMGTYYAZEnU'\r\n}\r\nconst response =await axios.post(url,authData)\r\nconst data =response.data\r\nconst expirationDate = new Date(new Date().getTime() + data.expiresIn * 1000)\r\n\r\nlocalStorage.setItem('token',data.idToken)\r\nlocalStorage.setItem('userId',data.localId)\r\nlocalStorage.setItem('expirationDate',expirationDate)\r\n\r\ndispatch (authSuccess(data.idToken))\r\ndispatch (autoLogout(data.expiresIn))\r\n}\r\n}\r\n\r\nexport function autoLogout(time){\r\n\treturn dispatch => {\r\n\t\tsetTimeout(() => {\r\n\t\t\tdispatch(logout())\r\n\t\t},time * 1000)\r\n\t}\r\n}\r\n\r\nexport function logout() {\r\nlocalStorage.removeItem('token')\r\nlocalStorage.removeItem('userId')\r\nlocalStorage.removeItem('expirationDate')\r\n\treturn {\r\n\t\ttype:AUTH_LOGOUT\r\n\t}\r\n}\r\n\r\n\r\nexport function authSuccess(token){\r\nreturn {\r\n\ttype:AUTH_SUCCESS,\r\n\ttoken\r\n}\r\n}\r\n\r\nexport function autoLogin (){\r\n\treturn dispatch => {\r\n\t\tconst token = localStorage.getItem('token')\r\n\t\tif (!token) {\r\n\t\t\tdispatch(logout())\r\n\t\t}else {\r\n\t\t\tconst expirationDate = new Date(localStorage.getItem('expirationDate'))\r\n\t\t\tif (expirationDate <= new Date()){\r\n\t\t\t\tdispatch(logout())\r\n\t\t\t}else {\r\n\t\t\t\tdispatch (authSuccess(token))\r\n\t\t\tdispatch (autoLogout((expirationDate.getTime() - new Date().getTime())/1000))\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n}"]},"metadata":{},"sourceType":"module"}